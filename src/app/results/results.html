<!-- Controls row -->
<div class="flex flex-col lg:flex-row items-center gap-4 mb-4">

    <!-- Search -->
    <div class="w-full lg:w-1/2">
        <div class="flex rounded-md overflow-hidden border border-gray-300 bg-white">
        <span class="flex items-center px-3 bg-gray-200 text-gray-800">
            <i class="fas fa-search"></i>
        </span>
        <input
            type="text"
            id="search"
            class="w-full px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="Search by Product Code or Batch Number..."
        >
        </div>
    </div>

    <!-- Column selector -->
    <div class="w-full sm:w-1/2 lg:w-1/6 relative">
        <button
        type="button"
        id="columnSelector"
        data-bs-toggle="dropdown"
        class="w-full flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-gray-800 border border-gray-300 rounded-md bg-white hover:bg-gray-100 transition"
        >
        <i class="fas fa-columns"></i>
        Select Columns
        </button>
        <ul
        id="columnList"
        class="dropdown-menu w-full"
        aria-labelledby="columnSelector"
        ></ul>
    </div>

    <!-- Filter tests -->
    <div class="w-full sm:w-1/2 lg:w-1/6">
        <button
        type="button"
        data-bs-toggle="modal"
        data-bs-target="#filterTestsModal"
        class="w-full flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 border border-blue-300 rounded-md hover:bg-blue-50 transition"
        >
        <i class="fas fa-filter"></i>
        Filter Tests
        </button>
    </div>

    <!-- Print -->
    <div class="w-full sm:w-1/2 lg:w-1/6">
        <button
        type="button"
        class="w-full flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-white bg-gray-900 rounded-md hover:bg-gray-800 transition"
        >
        <i class="fas fa-print"></i>
        Print
        </button>
    </div>
</div>

<div class="overflow-y-auto max-h-[60vh]">
    <table class="min-w-full border-collapse" id="testingTable">
        <thead class="bg-gray-100 sticky top-0 z-10">
        <tr class="text-left text-xs font-semibold text-gray-700 whitespace-nowrap">
            <th class="px-3 py-2">Batch Number</th>
            <th class="px-3 py-2">Product Code</th>
            <th class="px-3 py-2">Product Name</th>
            <th class="px-3 py-2">Date</th>
            <th class="px-3 py-2">Unworked Pen</th>
            <th class="px-3 py-2">Worked Pen</th>
            <th class="px-3 py-2">10K Pen</th>
            <th class="px-3 py-2">100K Pen</th>
            <th class="px-3 py-2">Drop Point</th>
            <th class="px-3 py-2">Weld</th>
            <th class="px-3 py-2">Wear</th>
            <th class="px-3 py-2">Timken</th>
            <th class="px-3 py-2">Rust</th>
            <th class="px-3 py-2">Copper Corrosion</th>
            <th class="px-3 py-2">Oxidation</th>
            <th class="px-3 py-2">Oil Bleed</th>
            <th class="px-3 py-2">Spray Off</th>
            <th class="px-3 py-2">Washout</th>
            <th class="px-3 py-2">Pressure Bleed</th>
            <th class="px-3 py-2">Roll Stability (Dry)</th>
            <th class="px-3 py-2">Roll Stability (Wet)</th>
            <th class="px-3 py-2">FT-IR</th>
            <th class="px-3 py-2">Minitest (-40 °C)</th>
            <th class="px-3 py-2">Minitest (-30 °C)</th>
            <th class="px-3 py-2">Minitest (-20 °C)</th>
            <th class="px-3 py-2">Minitest (0 °C)</th>
            <th class="px-3 py-2">Minitest (20 °C)</th>
            <th class="px-3 py-2">Rheometer (Temp)</th>
        </tr>
        </thead>
        <tbody class="divide-y divide-gray-200 text-xs text-gray-800">
        <tr class="hover:bg-gray-100">
            <td class="px-3 py-2"><%= row.batch %></td>
            <td class="px-3 py-2"><%= row.code %></td>
            <td class="px-3 py-2"><%= row.name %></td>
            <td class="px-3 py-2"><%= row.formattedDate %></td>
            <td class="px-3 py-2"><%= row.pen_0x %></td>
            <td class="px-3 py-2"><%= row.pen_60x %></td>
            <td class="px-3 py-2"><%= row.pen_10k %></td>
            <td class="px-3 py-2"><%= row.pen_100k %></td>
            <td class="px-3 py-2"><%= row.drop_point %></td>
            <td class="px-3 py-2"><%= row.weld %></td>
            <td class="px-3 py-2"><%= row.wear %></td>
            <td class="px-3 py-2"><%= row.timken %></td>
            <td class="px-3 py-2"><%= row.rust %></td>
            <td class="px-3 py-2"><%= row.copper_corrosion %></td>
            <td class="px-3 py-2"><%= row.oxidation %></td>
            <td class="px-3 py-2"><%= row.oil_bleed %></td>
            <td class="px-3 py-2"><%= row.spray_off %></td>
            <td class="px-3 py-2"><%= row.washout %></td>
            <td class="px-3 py-2"><%= row.pressure_bleed %></td>
            <td class="px-3 py-2"><%= row.roll_stability_dry %></td>
            <td class="px-3 py-2"><%= row.roll_stability_wet %></td>
            <td class="px-3 py-2"><%= row.ft_ir %></td>
            <td class="px-3 py-2"><%= row.minitest_minus_40 %></td>
            <td class="px-3 py-2"><%= row.minitest_minus_30 %></td>
            <td class="px-3 py-2"><%= row.minitest_minus_20 %></td>
            <td class="px-3 py-2"><%= row.minitest_0 %></td>
            <td class="px-3 py-2"><%= row.minitest_20 %></td>
            <td class="px-3 py-2">
            <%= row.rheometer %> (<%= row.rheometer_temp %> °C)
            </td>
        </tr>
        </tbody>
    </table>
</div>
